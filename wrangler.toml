# Top-level configuration
name = "typix"
main = "src/server/worker.ts"
compatibility_flags = ["nodejs_compat"]
compatibility_date = "2025-05-25"

[assets]
directory = "dist"
not_found_handling = "single-page-application"
run_worker_first = ["/api/*"]

[[d1_databases]]
binding = "DB"
database_name = "typix"
database_id = "41cc58cd-6a41-4169-95af-bf150df7a773"           # Replace with your actual database ID
migrations_dir = "drizzle/migrations"

[ai]
binding = "AI"

[vars]
# Application deployment mode configuration
# 
# client: Client-only mode - operates entirely on the client-side with no authentication required.
#         All user data is stored locally in browser storage (IndexedDB).
#         Ideal for privacy-focused deployments or when server infrastructure is not available.
#
# mixed:  Hybrid mode - supports both client-only operation and server-backed features.
#         Users can choose to remain client mode or sign in for cloud synchronization.
#         Authenticated users benefit from cross-device data sync and server-side data persistence.
#         Provides the best of both worlds: instant local access with optional cloud features.
MODE = "client"

# Authentication configuration, only for mixed mode
#
# AUTH_EMAIL_VERIFICATION_ENABLED = "false"
# AUTH_EMAIL_RESEND_API_KEY = ""
# AUTH_EMAIL_RESEND_FROM = "Typix <hi@typix.art>"
#
# AUTH_SOCIAL_GOOGLE_ENABLED = "false"
# AUTH_SOCIAL_GOOGLE_CLIENT_ID = ""
# AUTH_SOCIAL_GOOGLE_CLIENT_SECRET = ""
#
# AUTH_SOCIAL_GITHUB_ENABLED = "false"
# AUTH_SOCIAL_GITHUB_CLIENT_ID = ""
# AUTH_SOCIAL_GITHUB_CLIENT_SECRET = ""

# Enable Cloudflare built-in AI binding
# When set to true, uses Cloudflare Workers AI for image generation without requiring additional API keys
PROVIDER_CLOUDFLARE_BUILTIN = "true"
